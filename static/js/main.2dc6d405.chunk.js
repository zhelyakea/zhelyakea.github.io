(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{128:function(e,t){},146:function(e,t,i){e.exports=i(352)},169:function(e,t){},175:function(e,t){},352:function(e,t,i){"use strict";i.r(t);var n=i(0),o=i.n(n),a=i(21),r=i(6),s=i(1),l=i(68),c=i.n(l),u=(i(95),i(24)),d=i(23),m=i(20),f=i(26),g=i.n(f),p=i(25),h=i.n(p),v={layoutSettings:{id:"layoutSettings"},layoutTemplates:{id:"layoutTemplates"},createdTemplates:{id:"createdTemplates"},controls:{id:"controls"},grid:{id:"grid"},changeGridDimension:{id:"changeGridDimension"},hideGrid:{id:"hideGrid"},showGrid:{id:"showGrid"},removeAllPositions:{id:"removeAllPositions"},removeLayer:{id:"removeLayer"},addLayer:{id:"addLayer"},layer:{id:"layer"},layerNum:{id:"layerNum"},changeLayerNum:{id:"changeLayerNum"},saveAsNew:{id:"saveAsNew"},hideLowLayers:{id:"hideLowLayers"},showLowLayers:{id:"showLowLayers"},changeLayout:{id:"changeLayout"},confirmRemoval:{id:"confirmRemoval"},confirmLayoutDeletion:{id:"confirmLayoutDeletion"},cancel:{id:"cancel"},delete:{id:"delete"},confirmLayoutChange:{id:"confirmLayoutChange"},actionConfirm:{id:"actionConfirm"},unsavedLayoutChanges:{id:"unsavedLayoutChanges"},continueButton:{id:"continueButton"},continueText:{id:"continueText"},layoutsSearch:{id:"layoutsSearch"},role:{id:"role"},filterPositionRole:{id:"filterPositionRole"},dimension:{id:"dimension"},filterLayoutDimension:{id:"filterLayoutDimension"},numberParticipants:{id:"numberParticipants"},filterPumberParticipants:{id:"filterPumberParticipants"},clearFilter:{id:"clearFilter"},autoSelect:{id:"autoSelect"},lecturer:{id:"lecturer"},previousLecturer:{id:"previousLecturer"},blankScreen:{id:"blankScreen"},scrolling:{id:"scrolling"},notSet:{id:"notSet"},paginationText:{id:"paginationText"},positionEditing:{id:"positionEditing"},position:{id:"position"},changingPositionNumber:{id:"changingPositionNumber"},changingPositionRole:{id:"changingPositionRole"},deletePosition:{id:"deletePosition"},layoutSuccessfullyAdded:{id:"layoutSuccessfullyAdded"},errorAddingLayout:{id:"errorAddingLayout"},layoutSuccessfullyDeleted:{id:"layoutSuccessfullyDeleted"},errorDeletingLayout:{id:"errorDeletingLayout"},errorLoadingCreatedLayouts:{id:"errorLoadingCreatedLayouts"}};var y={key:function(e){return{margin:0,padding:0,fontSize:"inherit",flexGrow:1,flexShrink:0,flexBasis:"auto",display:"flex",flexDirection:"column",justifyContent:"center",alignContent:"center",alignItems:"center",textShadow:e?"0 0 30px #878788":"0 0 50px #878788"}},positionText:function(e,t){return{fontSize:function(e,t){return t?"15%":e?"20%":"50%"}(e,t),margin:t?"10px":"2.5px",color:"#ffffff"}},roleText:function(e){return{padding:0,maxWidth:"90%",flexGrow:1,flexShrink:0,flexBasis:"auto",margin:e?"10px":"2.5px",fontSize:e?"10%":"12%",color:"#ffffff",wordwrap:"normal"}},editButton:{margin:0,padding:0,minWidth:0,maxWidth:"100%",height:"100%",textTransform:"none",fontSize:"inherit",flexGrow:1,flexShrink:0,flexBasis:"auto",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",borderRadius:"2px"}},b=Object(r.c)(Object(m.c)(function(e){var t=e.intl,i=e.isSelectedLayer,n=e.modalOpen,a=e.isSmall,r=e.isMedium,s=e.isLarge,l=e.role,c=e.i;return o.a.createElement(g.a,{style:y.editButton,onClick:n},o.a.createElement("div",{style:y.key(i)},o.a.createElement(h.a,{variant:"title",style:y.positionText(r,s)},c),!a&&o.a.createElement(h.a,{variant:"title",style:y.roleText(s)},t.formatMessage(v[l]))))})),w=i(3),x=i(13),L=i(70),M=i.n(L),P=i(71),S=i.n(P),C={deleteButton:{position:"absolute",zIndex:1,top:"-0.4vw",right:"-0.4vw",color:"#616161",backgroundColor:"#e8eaf6",borderRadius:"50%",boxShadow:"0 0 15px #79797d",fontSize:"1.4vw",display:"flex",justifyContent:"center",alignItems:"center","&:hover":{color:"#e8eaf6ff",backgroundColor:"#EF5350",boxShadow:"0 0 15px #515152"}},deleteIcon:{fontSize:"1.2vw"}},O=Object(w.b)(Object(w.e)([]),Object(x.withStyles)(C))(function(e){var t=e.classes,i=e.onClick;return o.a.createElement(M.a,Object.assign({className:t.deleteButton},{onClick:i}),o.a.createElement(S.a,{className:t.deleteIcon}))}),j={block:function(e,t){return{background:e,filter:"grayscale(".concat(t?0:"40%",")"),color:"#ffffff",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",borderRadius:"2px",boxShadow:t?"0 0 25px #436894":"0 0 15px #436894",cursor:"pointer"}}},E=["autoSelect","lecturer","previousLecturer","blankScreen","scrolling"],H=Object(w.b)(r.c,Object(w.i)(function(e){var t=e.position,i=t.w,n=t.role,o=t.i,a=e.rowHeight,r=e.thisHeight,s=void 0===r?a*i:r;return{i:o,isSmall:s<=50,isMedium:s>50&&s<200,isLarge:s>=200,role:E[n],roleColor:["rgba(224, 224, 224, ".concat("0.7",")"),"rgba(128, 203, 196, ".concat("0.7",")"),"rgba(255, 183, 77, ".concat("0.7",")"),"rgba(189, 189, 189, ".concat("0.7",")"),"rgba(179, 229, 252, ".concat("0.7",")")][n]}}),Object(w.h)({removePositionHandler:function(e){var t=e.position.remove;return function(){t()}},selectPositionHandler:function(e){var t=e.position.selectPosition,i=e.positionModalShow;return function(e){t(),i(e.currentTarget)}}}))(function(e){var t=e.i,i=e.role,n=e.roleColor,a=e.removePositionHandler,r=e.style,s=e.children,l=e.selectPositionHandler,c=(e.positionModalShow,e.isSmall),m=e.isMedium,f=e.isLarge,g=(e.rowHeight,e.isSelectedLayer),p=Object(d.a)(e,["i","role","roleColor","removePositionHandler","style","children","selectPositionHandler","positionModalShow","isSmall","isMedium","isLarge","rowHeight","isSelectedLayer"]),h=Object(u.a)({},r,j.block(n,g));return o.a.createElement("div",Object.assign({},p,{style:h}),!c&&g&&o.a.createElement(O,{onClick:a}),o.a.createElement(b,{isSelectedLayer:g,modalOpen:l,isSmall:c,isMedium:m,isLarge:f,role:i,i:t}),g&&s)}),T=i(37);var N=i(28),D=i.n(N),R=Object(w.b)(Object(w.h)({onDrag:function(e){var t=e.holdTimerCount;return function(){t()}},onDragStart:function(e){var t=e.allowHoveredPositionChange;return function(){t(!1)}},onDragStop:function(e){var t=e.changeCoordinates,i=e.allowHoveredPositionChange;return function(e,n,o){if(i(!0),!D()(n,o)){var a=o.i,r=o.x,s=o.y;t(a,r,s)}}},onResizeStart:function(e){var t=e.allowHoveredPositionChange,i=e.changeMaxWidth;return function(e,n,o){var a=o.i;i(Object(u.a)({},function(e,t){var i=[];e.filter(function(e){return e.i!==t.i}).forEach(function(e){var n=e.x,o=e.y,a=e.w,r=e.h;(t.y>o&&o+r>t.y||t.y<=o&&t.y+t.h>=o)&&i.push(n-(t.x+t.w)),(t.x>n&&n+a>t.x||t.x<=n&&t.x+t.w>=n)&&i.push(o-(t.y+t.h)),n-(t.x+t.w)===o-(t.y+t.h)&&i.push(o-(t.y+t.h))});var n=Math.min.apply(Math,Object(T.a)(i.filter(function(e){return e>=0})));return{maxW:t.w+n,maxH:t.h+n}}(e,o),{i:a})),t(!1)}},onResizeStop:function(e){var t=e.changeWidth,i=e.allowHoveredPositionChange;return function(e,n,o){if(i(!0),!D()(n,o)){var a=o.i,r=o.w,s=o.h;t(a,r,s)}}}})),k=Object(w.b)(R,r.c)(function(e){var t=e.positions,i=e.dimension,n=e.itemMargin,a=e.rowHeight,r=e.width,s=e.onDragStop,l=e.onDrag,u=e.onDragStart,d=e.onResizeStart,m=e.onResizeStop,f=e.positionModalShow,g=e.isSelectedLayer;return o.a.createElement(c.a,Object.assign({margin:[n,n],compactType:null,autoSize:!1,preventCollision:!0},{cols:i,maxRows:i,rowHeight:a,layout:t,width:r,onDragStop:s,onDrag:l,onDragStart:u,onResizeStart:d,onResizeStop:m}),t.map(function(e,t){return o.a.createElement(H,{key:e.i,position:e,positionModalShow:f,rowHeight:a,isSelectedLayer:g})}))}),W=i(72),z=i.n(W),A={hoverStyle:function(e,t,i){return{backgroundColor:"#f5005744",color:"#ffffffcc",display:"flex",flexDirection:"column",justifyContent:"center",borderRadius:"2px",cursor:"pointer",position:"absolute",left:e,top:t,width:i,height:i,WebkitTransition:"all 200ms ease"}},keyHover:{flex:"1 0 auto",display:"flex",flexDirection:"column",justifyContent:"center",alignSelf:"center",textShadow:"0 0 30px #878788"},iconAdd:{fontSize:"2vw"}},V=function(e){var t=e.addPositionHandler,i=e.hoverX,n=e.hoverY,a=e.hoverWidth;return o.a.createElement("div",{onClick:t,style:A.hoverStyle(i,n,a)},o.a.createElement("span",{style:A.keyHover},o.a.createElement(z.a,{style:A.iconAdd})))},B={canvas:function(e){return{position:"absolute",width:e,left:"50%",top:"50%",transform:"translate(-50%, -50%)",zIndex:-1}}},I=Object(w.f)(function(e){var t=e.width,i=e.rowHeight,n=e.itemMargin,a=e.paletteWith,r=void 0===a?t-n:a,s=e.sttrokeWidth,l=void 0===s?t/200:s,c=e.viewBox,u=void 0===c?r+l/2:c,d=e.size,m=void 0===d?i+n:d;return o.a.createElement("svg",{style:B.canvas(r),viewBox:"0 0 ".concat(u," ").concat(u),xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("defs",null,o.a.createElement("pattern",{id:"grid",width:m,height:m,patternUnits:"userSpaceOnUse"},o.a.createElement("path",{d:"M ".concat(m," 0 L 0 0 0 ").concat(m),fill:"none",stroke:"#f5005744",strokeWidth:l,strokeOpacity:"1"}))),o.a.createElement("rect",{"data-type":"grid",width:"100%",height:"100%",fill:"url(#grid)"}))}),G={wrapper:function(e,t){return{width:e,height:e,backgroundColor:t?"rgba(185, 215, 239, 0.5)":"transparent",position:"relative"}},hoverStyle:function(e){var t=e.topX,i=e.topY,n=e.width;return{cursor:"pointer",position:"absolute",left:t,top:i,width:n,height:n,backgroundColor:"#aaaaaacc",textAlign:"center",WebkitTransition:"all 200ms ease"}}};var F=Object(w.b)(Object(w.k)("hoverPosition","hoverPositionChange",{visible:!1}),Object(w.k)("allowHoveredPosition","allowHoveredPositionChange",!0),Object(w.i)(function(e){var t=e.width,i=t/100*1.5;return{itemMargin:i,rowHeight:(t-i)/e.dimension-i}}),Object(w.h)({addPositionHandler:function(e){var t=e.hoverPositionChange,i=e.addPosition,n=e.hoverPosition,o=n.x,a=n.y;return function(){i(o,a),t({visible:!1})}},clearHoverPosition:function(e){var t=e.hoverPositionChange;return function(){t({visible:!1})}},addHoverPosition:function(e){var t=e.positions,i=e.dimension,n=e.itemMargin,o=e.rowHeight,a=e.width,r=e.hoverPositionChange,s=e.allowHoveredPosition,l=e.hoverPosition;return function(e){var c=function(e,t,i,n,o,a,r){var s=r.clientX,l=r.clientY,c=r.currentTarget.getBoundingClientRect(),u=c.left+i,d=c.top+i,m=Math.floor((o-2*i)/t),f=Math.floor((s-u)/m),g=Math.floor((l-d)/m),p=e.find(function(e){return!e.static&&f>=e.x&&f<e.x+e.w&&g>=e.y&&g<e.y+e.h});return p?{visible:!1}:!p&&a&&f>=0&&g>=0&&f<t&&g<t?{x:f,y:g,hoverX:i+f*i+f*n,hoverY:i+g*i+g*n,hoverWidth:n,visible:!0}:{visible:!1}}(t,i,n,o,a,s,e),u=c.x,d=c.y,m=c.hoverX,f=c.hoverY,g=c.hoverWidth,p=c.visible;l.hoverX===m&&l.hoverY===f||r({x:u,y:d,hoverX:m,hoverY:f,hoverWidth:g,visible:p})}}}),Object(w.d)(function(e){var t=e.hoverPosition,i=t.hoverX,n=t.hoverY,o=t.hoverWidth,a=t.visible,r=Object(d.a)(e,["hoverPosition"]);return Object(u.a)({hoverX:i,hoverY:n,hoverWidth:o,visible:a},r)}),r.c)(function(e){var t=e.positions,i=e.dimension,n=e.itemMargin,a=e.rowHeight,r=e.width,s=e.changeCoordinates,l=e.changeWidth,c=e.changeMaxWidth,u=(e.addPosition,e.addHoverPosition),d=e.clearHoverPosition,m=e.addPositionHandler,f=(e.hoverPosition,e.allowHoveredPosition,e.allowHoveredPositionChange),g=e.positionModalShow,p=e.holdTimerCount,h=e.hoverX,v=e.hoverY,y=e.hoverWidth,b=e.visible,w=e.isSelectedLayer,x=e.isLowestVisible;return o.a.createElement("div",{style:G.wrapper(r,x),onMouseMove:u,onMouseLeave:d},w&&o.a.createElement(I,{width:r,rowHeight:a,itemMargin:n}),o.a.createElement(k,{positions:t,dimension:i,itemMargin:n,rowHeight:a,width:r,changeCoordinates:s,changeWidth:l,changeMaxWidth:c,allowHoveredPositionChange:f,positionModalShow:g,holdTimerCount:p,isSelectedLayer:w}),b&&o.a.createElement(V,{addPositionHandler:m,hoverX:h,hoverY:v,hoverWidth:y}))}),X={layerWrapper:function(e){return{position:e?"relative":"absolute"}}},Y=i(4),J=Object(w.b)(r.c,Object(w.i)(function(e){var t=e.layer,i=t.dimension,n=t.positions,o=t.addPosition,a=t.changeCoordinates,r=t.changeWidth,s=t.changeMaxWidth,l=t.visible,c=e.index,u=e.width,d=e.positionModalShow,m=e.holdTimerCount,f=e.selectedLayer,g=e.getLowestVisible,p=c===f;return{positions:Object(Y.A)(n),dimension:i,isSelectedLayer:p,width:u,changeCoordinates:a,changeWidth:r,changeMaxWidth:s,addPosition:o,positionModalShow:d,holdTimerCount:m,isLowestThanSelected:c<=f,isInvisible:!l&&!p,isLowestVisible:g===c}}),Object(w.a)(function(e){var t=e.isLowestThanSelected,i=e.isInvisible;return!t||i},w.g))(function(e){var t=e.positions,i=e.dimension,n=e.isSelectedLayer,a=e.width,r=e.changeCoordinates,s=e.changeWidth,l=e.changeMaxWidth,c=e.addPosition,u=e.positionModalShow,d=e.holdTimerCount,m=e.isLowestVisible;return o.a.createElement("div",{style:X.layerWrapper(n)},o.a.createElement(F,{positions:t,dimension:i,isSelectedLayer:n,width:a,changeCoordinates:r,changeWidth:s,changeMaxWidth:l,addPosition:c,positionModalShow:u,holdTimerCount:d,isLowestVisible:m}))}),U=i(132),$=i.n(U),q=i(130),K=i.n(q),Q=i(131),Z=i.n(Q),_={visibleButton:{position:"absolute",zIndex:1,top:"-0.4vw",right:"1.2vw",color:"#616161",backgroundColor:"#e8eaf6",borderRadius:"50%",boxShadow:"0 0 15px #79797d",fontSize:"1.4vw",display:"flex",justifyContent:"center",alignItems:"center","&:hover":{boxShadow:"0 0 15px #515152"}},visibleIcon:{fontSize:"1.2vw"}},ee=Object(w.b)(Object(x.withStyles)(_),r.c)(function(e){var t=e.classes,i=e.visibleOffHandler,n=e.visibleOnHandler,a=e.visible;return o.a.createElement(M.a,{className:t.visibleButton},a?o.a.createElement(K.a,{className:t.visibleIcon,onClick:i}):o.a.createElement(Z.a,{className:t.visibleIcon,onClick:n}))}),te=Object(w.b)(Object(w.i)(function(e){var t=e.layer.visible;return{lowestThanSelected:e.index<e.selectedLayer,visible:t}}),Object(w.h)({removeLayerHandler:function(e){var t=e.removeLayer,i=e.index;return function(){t(i)}},visibleOffHandler:function(e){var t=e.layer.visibleOff;return function(){t()}},visibleOnHandler:function(e){var t=e.layer.visibleOn;return function(){t()}}})),ie={tabRoot:{minHeight:"3.3vw",textTransform:"initial",minWidth:"6vw",fontSize:"1.2vw",backgroundColor:"#668cabaa","&$tabSelected":{color:"#0000008a",backgroundColor:"rgba(185, 215, 239, 0.5)"}},tabSelected:{},labelContainer:{padding:0},tabWrapper:{position:"relative"}},ne=Object(w.b)(m.c,r.c,te)(Object(x.withStyles)(ie)(function(e){var t=e.intl,i=e.classes,n=e.index,a=e.lowestThanSelected,r=e.layersMoreThanOne,s=(e.removeLayer,e.removeLayerHandler),l=e.visible,c=e.visibleOffHandler,u=e.visibleOnHandler,m=(e.selectedLayer,Object(d.a)(e,["intl","classes","index","lowestThanSelected","layersMoreThanOne","removeLayer","removeLayerHandler","visible","visibleOffHandler","visibleOnHandler","selectedLayer"]));return o.a.createElement("div",{className:i.tabWrapper},r&&o.a.createElement(O,{onClick:s}),a&&o.a.createElement(ee,{visible:l,visibleOffHandler:c,visibleOnHandler:u}),o.a.createElement($.a,Object.assign({label:t.formatMessage(v.layer,{index:n})},m,{classes:{root:i.tabRoot,selected:i.tabSelected,labelContainer:i.labelContainer}})))})),oe=i(32),ae=i.n(oe),re={tabRoot:{minHeight:0,textTransform:"initial",minWidth:"4vw",fontSize:"1.2vw",color:"#0000008a",backgroundColor:"#b9d7ef52",display:"flex",alignItems:"center",justifyContent:"center"},labelContainer:{padding:0},tabWrapper:{position:"relative"},addButton:{padding:0,width:"2vw",height:"2vw"},addIcon:{fontSize:"1.4vw",color:"#616161"}},se=Object(x.withStyles)(re)(function(e){var t=e.classes,i=e.addLayerHandler;return o.a.createElement("div",{className:t.tabRoot,onClick:i},o.a.createElement(ae.a,{className:t.addButton,"aria-label":"addIcon"},o.a.createElement(z.a,{className:t.addIcon})))}),le=i(133),ce=i.n(le),ue={wrapper:{display:"flex",flexdirection:"row",justifyContent:"space-between",alignItens:"center"},layersWrapper:{display:"flex",flexdirection:"row",justifyContent:"flex-end"},tabsRoot:{minHeight:0,overflow:"visible"},tabsIndicator:{backgroundColor:"transparent"},textTitle:{margin:"0",paddingTop:"1vw",paddingBottom:"1vw",fontSize:"1.2vw",whiteSpace:"nowrap",fontWeight:"normal",color:"#616161"},scroller:{overflow:"visible"}},de=Object(w.h)({selectLayerHandler:function(e){var t=e.selectLayer;return function(e,i){t(i)}}}),me=Object(w.b)(m.c,de,r.c)(Object(x.withStyles)(ue)(function(e){var t=e.intl,i=e.classes,n=e.layers,a=e.selectedLayer,r=e.selectLayerHandler,s=e.layersMoreThanOne,l=e.layersLessThanThree,c=e.removeLayer,u=e.addLayerHandler,d={root:i.tabsRoot,scroller:i.scroller,indicator:i.tabsIndicator};return o.a.createElement("div",{className:i.wrapper},o.a.createElement("h3",{style:ue.textTitle},t.formatMessage(v.layoutSettings)),o.a.createElement("div",{className:i.layersWrapper},o.a.createElement(ce.a,{value:a,onChange:r,classes:d},n.map(function(e,t){return o.a.createElement(ne,Object.assign({key:t},{index:t,layersMoreThanOne:s,removeLayer:c,selectedLayer:a,layer:e}))})),l&&o.a.createElement(se,{addLayerHandler:u})))})),fe={wrapper:{flexGrow:0,flexShrink:0,flexBasis:"45%",maxWidth:"45%",marginLeft:"1.5vw",fontFamily:"Roboto, sans-serif"},mosaicWrapper:{position:"relative"}},ge=function(e){e.id;var t=e.layers,i=e.valuesLayers,n=(e.remove,e.selectedLayer),a=e.selectLayer,r=(e.saveAsNew,e.width),s=e.positionModalShow,l=e.holdTimerCount,c=e.layersMoreThanOne,u=e.layersLessThanThree,d=e.removeLayer,m=e.addLayerHandler,f=e.getLowestVisible;return o.a.createElement("div",{style:fe.wrapper},o.a.createElement(me,{layers:i,selectedLayer:n,selectLayer:a,layersMoreThanOne:c,layersLessThanThree:u,removeLayer:d,addLayerHandler:m}),o.a.createElement("div",{style:fe.mosaicWrapper},t.map(function(e,t){return o.a.createElement(J,{key:t,layer:e,index:t,width:r,positionModalShow:s,holdTimerCount:l,selectedLayer:n,getLowestVisible:f})})))},pe=i(73),he=i.n(pe);var ve=Object(w.b)(he()(),Object(r.b)("mosaic","editableMosaic","positionModal"),r.c,Object(w.h)({removeLayer:function(e){var t=e.editableMosaic,i=t.mosaic,n=i.layers,o=(i.selectedLayer,t.removeLayer),a=t.openConfirmRemoveLayer,r=e.mosaic,s=r.selectedMosaic,l=r.getPresetById;return function(e){!function(e,t,i,n){var o=n(t.toString());if(o){var a=o.layers[i],r=e[i];if(a){if(t){r.visible;var s=Object(d.a)(r,["visible"]),l=(a.visible,Object(d.a)(a,["visible"]));return D()(s,l)}return 0===r.positions.length&&3===r.dimension}}return!1}(n,s,e,l)?a(e):o(e)}},addLayerHandler:function(e){var t=e.editableMosaic.mosaic.addLayer;return function(){t()}}}),r.c,Object(w.i)(function(e){var t=e.positionModal,i=t.positionModalShow,n=t.holdTimerCount,o=e.size.width,a=e.editableMosaic,r=a.mosaic,s=r.id,l=r.layers,c=r.remove,u=r.selectedLayer,d=r.selectLayer,m=a.layersMoreThanOne,f=a.layersLessThanThree,g=a.getLowestVisible;return{id:s,layers:l,valuesLayers:Object(Y.A)(l),remove:c,selectedLayer:u,selectLayer:d,width:o,positionModalShow:i,holdTimerCount:n,layersMoreThanOne:m,layersLessThanThree:f,getLowestVisible:g}}),r.c)(ge),ye={block:function(e){return{background:e,color:"#ffffff",display:"flex",flexDirection:"row",borderRadius:"2px",boxShadow:"0 0 20px #7d96b5",textShadow:"0 0 20px #878788",cursor:"pointer"}}},be=["#E0E0E0aa","#80CBC4aa","#FFB74Daa","#BDBDBDaa","#B3E5FCaa"],we=Object(w.b)(Object(x.withStyles)({positionPresetText:{flex:"1 0 auto",display:"flex",flexDirection:"column",alignSelf:"center",fontSize:"40%",color:"#ffffff",margin:0}}),w.f)(function(e){var t=e.classes,i=(e.positionPresetText,e.i),n=e.role,a=e.style,r=e.className,s=Object(d.a)(e,["classes","positionPresetText","i","role","style","className"]),l=Object(u.a)({},a,ye.block(be[n]));return o.a.createElement("div",Object.assign({},s,{style:l},{className:r}),o.a.createElement(h.a,{className:t.positionPresetText},i))}),xe=Object(r.c)(function(e){var t=e.positions,i=e.dimension,n=e.itemMargin,a=e.presetWidth;return o.a.createElement(c.a,Object.assign({margin:[n,n],compactType:null,autoSize:!1,preventCollision:!0},{isDraggable:!1,isResizable:!1,cols:i,maxRows:i,rowHeight:function(e,t,i){return(e-1*t)/i-t}(a,n,i),layout:t,width:a}),t.map(function(e,t){var i=e.i,n=e.role;return o.a.createElement(we,{key:i,i:i,role:n})}))}),Le={wrapper:function(e){return{margin:e,position:"relative",flex:"0"}},resizeWrapper:function(e,t){return{position:"relative",alignSelf:"center",background:t?"#668cabcc":"#b9d7efcc",height:"".concat(e,"px"),width:"".concat(e,"px"),borderRadius:"2px",boxShadow:"0 0 5px #9E9E9E"}},layoutWrapper:{position:"absolute"}},Me=Object(w.b)(r.c,Object(w.h)({removeHandler:function(e){var t=e.mosaic.openConfirmRemoveMosaic;return function(){t()}},selectMosaicHandler:function(e){var t=e.mosaic.id,i=e.confirmSelectMosaic,n=e.isDefault;return function(){i(t,n)}}}),Object(w.i)(function(e){var t=e.mosaic,i=t.id,n=t.layers,o=e.selectedMosaic,a=(e.itemMargin,e.presetWidth,e.removeHandler,n[0]),r=a.positions,s=a.dimension;return{isSelected:function(e,t){return Number(e)===t}(i,o),positions:r,dimension:s,layers:n}}))(Object(x.withStyles)({presetButton:{padding:0,minWidth:0}})(function(e){var t=e.classes,i=e.isSelected,n=(e.positions,e.dimension,e.isDefault),a=e.presetMargin,r=e.prstCntnrWidth,s=e.itemMargin,l=e.presetWidth,c=e.removeHandler,u=e.selectMosaicHandler,d=e.layers;return o.a.createElement("div",{style:Le.wrapper(a)},!n&&o.a.createElement(O,{onClick:c}),o.a.createElement(g.a,{onClick:u,className:t.presetButton},o.a.createElement("div",{style:Le.resizeWrapper(l,i)},d.map(function(e,t){var i=e.positions,n=e.dimension;return o.a.createElement("div",{key:t,style:Le.layoutWrapper},o.a.createElement(xe,{positions:i,dimension:n,presetMargin:a,prstCntnrWidth:r,itemMargin:s,presetWidth:l}))}))))})),Pe=i(135),Se=i.n(Pe),Ce=i(134),Oe=i.n(Ce),je={paginationWrapper:{height:"2vw",flex:"0 1 auto",display:"flex",justifyContent:"flex-end",alignItems:"center",fontSize:"1.2vw",color:"#616161"},icon:{fontSize:"1.5vw"},paginationText:{marginRight:"1vw"}},Ee=Object(w.b)(m.c,Object(w.e)(["count","rowsPerPage","page"]),Object(x.withStyles)({button:{margin:"0.2vw",width:"2vw",height:"2vw",padding:0}}))(function(e){var t=e.classes,i=e.count,n=e.rowsPerPage,a=e.page,r=e.pagePrevHandler,s=e.pageNextHandler,l=e.intl,c=e.isLast,u=void 0===c?a>=i/n-1:c,d=e.firstOnPage,m=void 0===d?a*n+1:d,f=e.lastOnPage,g=void 0===f?u?i:a*n+n:f;return o.a.createElement("div",{style:je.paginationWrapper},o.a.createElement("span",{style:je.paginationText},l.formatMessage(v.paginationText,{firstOnPage:m,lastOnPage:g,count:i})),o.a.createElement(ae.a,{className:t.button,onClick:r,"aria-label":"Prev Page",disabled:0===a},o.a.createElement(Oe.a,{style:je.icon})),o.a.createElement(ae.a,{className:t.button,onClick:s,"aria-label":"Next Page",disabled:u},o.a.createElement(Se.a,{style:je.icon})))}),He=i(136),Te=i.n(He),Ne=i(137),De=i.n(Ne),Re={icon:{fontSize:"1.5vw",color:"#616161"}},ke=Object(w.b)(Object(w.e)(["isPrstsVisble"]),Object(x.withStyles)({expandButton:{width:"2vw",height:"2vw",padding:0}}))(function(e){var t=e.classes,i=e.prstsVsblChangeHndlr,n=e.isPrstsVisble;return o.a.createElement(ae.a,{className:t.expandButton,"aria-label":"ExpandMore",onClick:i},n?o.a.createElement(Te.a,{style:Re.icon}):o.a.createElement(De.a,{style:Re.icon}))}),We={typePresetWrapper:function(e){return{widht:"100%",flexGrow:e?1:0,flexShrink:0,flexBasis:e?"50%":"auto",display:"flex",flexDirection:"column",justifyContent:"flex-start",alignContent:"stretch"}},mozaicTitleWrapper:{flexGrow:0,flexShrink:0,flexBasis:"auto",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},presetTopWrapper:{flexGrow:1,flexShrink:0,flexBasis:"auto",display:"flex",flexDirection:"column",justifyContent:"space-between",alignContent:"flex-start",position:"relative"},presetWrapper:{flexGrow:0,flexShrink:0,flexBasis:"auto",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-start",alignContent:"flex-start"},textTitle:{margin:"0",paddingTop:"1vw",paddingBottom:"1vw",fontSize:"1.2vw",fontWeight:"normal",color:"#616161",maxWidth:"18vw",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},ze=Object(w.b)(r.c,Object(w.i)(function(e){var t=e.presetsList,i=e.presetsOnPage,n=e.page,o=n.page,a=n.pagePrev,r=n.pageNext,s=function(e,t,i){return e.filter(function(e,n){return n>=t*i&&n<t*i+t})}(t,i,o),l=t.length;return{presetTodisplay:s,presetslistLength:l,page:o,pagePrev:a,pageNext:r,isPagination:l>i}}),Object(w.h)({pagePrevHandler:function(e){var t=e.pagePrev;return function(){t()}},pageNextHandler:function(e){var t=e.pageNext;return function(){t()}}}))(Object(r.c)(function(e){var t=e.text,i=e.isDefault,n=e.selectedMosaic,a=(e.presetsList,e.confirmSelectMosaic),r=e.isVisible,s=e.presetsOnPage,l=e.changeVisibleHandler,c=e.presetMargin,u=e.prstCntnrWidth,d=e.itemMargin,m=e.presetWidth,f=e.pagePrevHandler,g=e.pageNextHandler,p=e.presetTodisplay,h=e.presetslistLength,v=e.page,y=e.isPagination;return o.a.createElement("div",{style:We.typePresetWrapper(r)},o.a.createElement("div",{style:We.mozaicTitleWrapper,onClick:l},o.a.createElement("h3",{style:We.textTitle},t," ",h),o.a.createElement(ke,{isPrstsVisble:r})),r&&o.a.createElement("div",{style:We.presetTopWrapper},o.a.createElement("div",{style:We.presetWrapper},p.map(function(e){return o.a.createElement(Me,{key:e.id,isDefault:i,mosaic:e,confirmSelectMosaic:a,selectedMosaic:n,presetMargin:c,prstCntnrWidth:u,itemMargin:d,presetWidth:m})})),y&&o.a.createElement(Ee,{count:h,rowsPerPage:s,page:v,pagePrevHandler:f,pageNextHandler:g})))})),Ae={wrapper:{flexGrow:0,flexShrink:0,flexBasis:"35%",maxWidth:"35%",maxHeigth:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between",fontFamily:"Roboto, sans-serif"}},Ve=Object(r.c)(function(e){var t=e.intl,i=(e.selectedMosaic,e.defaultPresets),n=e.customPresets,a=e.confirmSelectMosaic,r=e.defaultVisible,s=e.customVisible,l=e.presetsOnPage,c=e.changeDefaultVisibleHandler,u=e.changeCustomVisibleHandler,d=e.selectedDefaultMosaic,m=e.selectedCustomMosaic,f=e.presetMargin,g=e.prstCntnrWidth,p=e.itemMargin,h=e.presetWidth,y=e.defaultPresetsPage,b=e.customPresetsPage;return o.a.createElement("div",{style:Ae.wrapper},o.a.createElement(ze,{text:t.formatMessage(v.layoutTemplates),isDefault:!0,selectedMosaic:d,presetsList:Object(Y.A)(i),confirmSelectMosaic:a,isVisible:r,presetsOnPage:l,changeVisibleHandler:c,presetMargin:f,prstCntnrWidth:g,itemMargin:p,presetWidth:h,page:y}),o.a.createElement(ze,{text:t.formatMessage(v.createdTemplates),isDefault:!1,selectedMosaic:m,presetsList:Object(Y.A)(n),confirmSelectMosaic:a,isVisible:s,presetsOnPage:l,changeVisibleHandler:u,presetMargin:f,prstCntnrWidth:g,itemMargin:p,presetWidth:h,page:b}))});var Be=Object(w.b)(m.c,Object(r.b)("editableMosaic","mosaic","presets","defaultPresetsPage","customPresetsPage"),r.c,Object(w.h)({changeDefaultVisibleHandler:function(e){var t=e.presets.changeDefaultVisible;return function(){t()}},changeCustomVisibleHandler:function(e){var t=e.presets.changeCustomVisible;return function(){t()}},confirmSelectMosaic:function(e){var t=e.editableMosaic.mosaic,i=e.mosaic,n=i.selectedMosaic,o=i.selectMosaic,a=i.openConfirmSelectMosaic,r=i.getPresetById;return function(e,i){(function(e,t,i){if(t){var n=i(t.toString()).layers.map(function(e){return{positions:e.positions,dimension:e.dimension}}),o=e.layers.map(function(e){return{positions:e.positions,dimension:e.dimension}});return D()(o,n)}return 1===e.layers.length&&0===e.layers[0].positions.length&&3===e.layers[0].dimension})(t,n,r)?o(e,i):a(e,i)}}}),r.c,Object(w.i)(function(e){var t=e.mosaic,i=t.selectedMosaic,n=t.defaultPresets,o=t.customPresets,a=t.selectMosaic,r=(t.isDefaultSelected,e.presets);return{selectedMosaic:i,defaultPresets:n,customPresets:o,selectMosaic:a,defaultVisible:r.defaultVisible,customVisible:r.customVisible,presetsOnPage:r.presetsOnPage,defaultPresetsPage:e.defaultPresetsPage,customPresetsPage:e.customPresetsPage}}),Object(w.j)(["isDefaultSelected","selectedMosaic"],function(e){var t=e.mosaic,i=t.selectedMosaic,n=t.isDefaultSelected;return{selectedDefaultMosaic:n?i:null,selectedCustomMosaic:n?null:i}}),he()(),Object(w.d)(function(e){var t=e.size.width,i=Object(d.a)(e,["size"]);return Object(u.a)({width:t},i)}),Object(w.j)(["width"],function(e){var t=function(e){var t=e/100*1.2;return{presetMargin:t,prstCntnrWidth:e,itemMargin:e/100,presetWidth:e/4-3*t}}(e.width);return{presetMargin:t.presetMargin,prstCntnrWidth:t.prstCntnrWidth,itemMargin:t.itemMargin,presetWidth:t.presetWidth}}))(Ve),Ie=i(86),Ge=i.n(Ie),Fe=i(67),Xe=i.n(Fe),Ye=i(139),Je=i.n(Ye),Ue=i(141),$e=i.n(Ue),qe=i(138),Ke=i.n(qe),Qe=i(140),Ze=i.n(Qe),_e=i(142),et=i.n(_e),tt={root:{display:"flex",flexWrap:"wrap",justifyContent:"center",fontSize:"1vw"},formControl:{fontSize:"1vw",margin:".3vw",minWidth:"90%",maxWidth:"90%"},selectMenu:{padding:".5vw",fontSize:"1vw",lineHeight:"1vw"},selectMenuRoot:{fontSize:"1vw"},menuItem:{padding:".8vw",fontSize:"1vw"},inputLabel:{fontSize:"1vw",marginTop:"1vw"},inputRoot:{},iconSelect:{fontSize:"1vw"}},it=Object(w.b)(Object(w.h)({chngeHndlr:function(e){var t=e.valueChngeHndlr;return function(e){t(e.target.value)}}}),Object(w.d)(function(e){return{value:e.value,list:e.list,title:e.title,helperText:e.helperText,chngeHndlr:e.chngeHndlr}}),Object(w.e)(["value","list"]))(Object(x.withStyles)(tt)(function(e){var t=e.classes,i=(e.theme,e.value),n=e.list,a=e.title,r=e.helperText,s=e.chngeHndlr,l={root:t.inputLabel},c={icon:t.iconSelect,root:t.selectMenuRoot,selectMenu:t.selectMenu},u={root:t.inputRoot},d={root:t.menuItem},m={root:t.inputLabel};return o.a.createElement("div",{className:t.root},o.a.createElement(Ke.a,{className:t.formControl},o.a.createElement(Je.a,{classes:l,htmlFor:"count-select"},a),o.a.createElement(Ze.a,{value:i,onChange:s,input:o.a.createElement(Xe.a,{id:"count-select",classes:u}),classes:c},n.map(function(e){return o.a.createElement($e.a,{key:e,value:e,classes:d},e)})),o.a.createElement(et.a,{classes:m},r)))})),nt=function(e){return{typography:{padding:e.spacing.unit,paddingBottom:2*e.spacing.unit,fontSize:"1vw"},buttonDelete:{padding:"0.5vw",color:"#EF5350",marginTop:"2vw",alignSelf:"center",fontSize:"1vw"},paper:{backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:"2vw 1vw",width:"15vw",display:"flex",flexDirection:"column",justifyContent:"center"},closeButton:{position:"absolute",zIndex:1,right:"0.2vw",top:"0.2vw",cursor:"pointer",color:"grey"},icon:{fontSize:"1.2vw"},seletcRoot:{marginTop:".5vw"}}},ot={vertical:"center",horizontal:"left"},at={vertical:"top",horizontal:"left"},rt=Object(x.withStyles)(nt)(function(e){var t=e.intl,i=e.roles,n=e.getLayersPositions,a=e.classes,r=e.target,s=e.visible,l=e.positionModalHideHandler,c=e.selectedPosition,u=e.role,d=e.changeRoleHandler,m=e.removeHandler,f=e.changePositionNumHandler;return o.a.createElement(Ge.a,{open:s,anchorEl:r,onClose:l,anchorOrigin:ot,transformOrigin:at},o.a.createElement("div",{className:a.paper},o.a.createElement(ae.a,{className:a.closeButton,"aria-label":"Delete",onClick:l},o.a.createElement(S.a,{className:a.icon})),o.a.createElement(h.a,{className:a.typography},t.formatMessage(v.positionEditing,{selectedPosition:c})),o.a.createElement("div",{className:a.seletcRoot},o.a.createElement(it,{title:t.formatMessage(v.position),helperText:t.formatMessage(v.changingPositionNumber),list:n,value:c,valueChngeHndlr:f})),o.a.createElement("div",{className:a.seletcRoot},o.a.createElement(it,{title:t.formatMessage(v.role),helperText:t.formatMessage(v.changingPositionRole),list:i,value:i[u],valueChngeHndlr:d})),o.a.createElement(g.a,{className:a.buttonDelete,onClick:m},t.formatMessage(v.deletePosition))))}),st=Object(w.b)(m.c,Object(r.b)("positionModal","editableMosaic"),r.c,Object(w.i)(function(e){var t=e.intl,i=e.positionModal,n=i.target,o=i.visible,a=i.positionModalHide,r=e.editableMosaic,s=r.getPosition,l=s.role,c=s.changeRole,u=s.remove,d=s.changePositionNum,m=r.getLayersPositions;return{target:n,visible:o,positionModalHide:a,selectPosition:r.selectPosition,selectedPosition:r.selectedPosition,role:l,changeRole:c,remove:u,changePositionNum:d,getLayersPositions:m,roles:E.map(function(e){return t.formatMessage(v[e])})}}),Object(w.h)({positionModalHideHandler:function(e){var t=e.positionModalHide;return function(){t()}},changeRoleHandler:function(e){var t=e.positionModalHide,i=e.changeRole,n=e.roles;return function(e){t(),i(n.indexOf(e))}},removeHandler:function(e){var t=e.remove,i=e.positionModalHide;return function(){i(),t()}},changePositionNumHandler:function(e){var t=e.positionModalHide,i=e.changePositionNum,n=e.selectedPosition,o=e.selectPosition;return function(e){t(),i(n,e),o(e)}}}))(rt),lt=Object(w.b)(Object(w.h)({onClickHandler:function(e){var t=e.onClick;return function(){t()}}}),Object(x.withStyles)({success:{color:"#1565C0",margin:"0.5vw",alignSelf:"center",fontSize:"1vw",padding:"0.5vw"},danger:{color:"#EF5350",margin:"1vw",alignSelf:"center",fontSize:"1vw",padding:"0.5vw"}}),Object(w.e)([]))(function(e){var t=e.classes,i=e.text,n=e.onClickHandler,a=e.type;return o.a.createElement(g.a,{className:t[a],onClick:n},i)}),ct={wrapper:{flexGrow:0,flexShrink:0,flexBasis:"15%",maxWidth:"15%",maxHeigth:"100%",marginLeft:"1.5vw",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"flex-start",fontFamily:"Roboto, sans-serif"},controls:{width:"100%",height:"100%",background:"#f6f8f9",borderRadius:"5px",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",paddingLeft:10,paddingRight:10},textTitle:{margin:"0",paddingTop:"1vw",paddingBottom:"1vw",fontSize:"1.2vw",whiteSpace:"nowrap",fontWeight:"normal",color:"#616161"},controlsWrapper:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},customPageControls:{height:"100%",maxHeight:"100%",display:"flex",flexFlow:"column wrap",justifyContent:"flex-start"}},ut=function(e){var t=e.intl,i=e.dimension,n=e.supportedDimensions,a=e.changeDimensionHandler,r=e.saveAsNewHandler,s=e.removeAllPositionsHandler,l=e.hasLayerPositions,c=e.getLayersPositions,u=e.isHideLowLayers,d=e.isShowLowLayers,m=e.hideLowLayersHandler,f=e.showLowLayersHandler,g=e.layersNumList,p=e.selectedLayer,h=e.changeLayerNumHandler,y=e.layersMoreThanOne;return o.a.createElement("div",{style:ct.wrapper},o.a.createElement("h3",{style:ct.textTitle},t.formatMessage(v.controls)),o.a.createElement("div",{style:ct.controls},o.a.createElement("div",{style:ct.controlsWrapper},o.a.createElement(it,{title:t.formatMessage(v.grid),helperText:t.formatMessage(v.changeGridDimension),list:n,value:i,valueChngeHndlr:a}),y&&o.a.createElement(it,{title:t.formatMessage(v.layerNum),helperText:t.formatMessage(v.changeLayerNum),list:g,value:p,valueChngeHndlr:h}),l&&o.a.createElement(lt,{type:"danger",text:t.formatMessage(v.removeAllPositions),onClick:s}),u&&o.a.createElement(lt,{type:"success",text:t.formatMessage(v.hideLowLayers),onClick:m}),d&&o.a.createElement(lt,{type:"success",text:t.formatMessage(v.showLowLayers),onClick:f})),o.a.createElement("div",null,o.a.createElement("div",{style:ct.customPageControls},c&&o.a.createElement(lt,{type:"success",text:t.formatMessage(v.saveAsNew),onClick:r})))))};var dt=Object(w.b)(m.c,Object(r.b)("editableMosaic","mosaic"),r.c,Object(w.h)({removeAllPositionsHandler:function(e){var t=e.editableMosaic,i=t.mosaic,n=i.layers,o=i.selectedLayer,a=t.removeLayerPositions,r=t.openConfirmRemovePositions,s=e.mosaic,l=s.selectedMosaic,c=s.getPresetById;return function(){!function(e,t,i,n){return t?D()(e[i],n(t.toString()).layers[i]):0===e[i].positions.length&&3===e[i].dimension}(n,l,o,c)?r():a()}},changeDimensionHandler:function(e){var t=e.editableMosaic.mosaic,i=t.layers,n=t.selectedLayer;return function(e){(0,i.get(n).changeDimension)(Number(e))}},saveAsNewHandler:function(e){var t=e.mosaic.saveAsNew,i=e.editableMosaic.mosaic.layers;return function(){t(i)}},hideLowLayersHandler:function(e){var t=e.editableMosaic.mosaic.hideLowLayers;return function(){t()}},showLowLayersHandler:function(e){var t=e.editableMosaic.mosaic.showLowLayers;return function(){t()}},changeLayerNumHandler:function(e){var t=e.editableMosaic.mosaic,i=t.changeLayerNum,n=t.selectedLayer;return function(e){Number(e)!==n&&i(Number(e))}}}),r.c,Object(w.i)(function(e){var t=e.editableMosaic,i=t.mosaic,n=i.layers,o=i.selectedLayer,a=i.lowLayersVisibility,r=i.getLayersPositions,s=t.getSupportedDimensions,l=t.layersMoreThanOne,c=!!n[o].getPositionsLength,u=n.get(o).dimension,d=0===o,m=!d&&l&&a,f=!d&&l&&!a,g=n.map(function(e,t){return t.toString()}),p=s.map(function(e){return e.toString()});return{layersNumList:g,layers:n,selectedLayer:o.toString(),hasLayerPositions:c,getLayersPositions:r,dimension:u.toString(),supportedDimensions:p,isHideLowLayers:m,isShowLowLayers:f,layersMoreThanOne:l}}))(ut),mt=i(53),ft=i.n(mt),gt=function(e){return{title:{margin:"1.2vw",textAlign:"center",fontSize:"1vw"},text:{fontSize:"1vw"},paper:{top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"absolute",width:"30vw",backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:"2vw"},cancel:{color:"#1565C0",marginTop:"0.5vw",alignSelf:"center",fontSize:"1vw",padding:"0.5vw"},delete:{color:"#EF5350",marginTop:"0.5vw",alignSelf:"center",fontSize:"1vw",padding:"0.5vw"},buttonWrapper:{marginTop:"1vw",display:"flex",flexDirection:"row",justifyContent:"space-between"}}},pt=Object(x.withStyles)(gt)(function(e){var t=e.intl,i=e.classes,n=e.isConfirm,a=e.close,r=e.confirm;return o.a.createElement("div",null,o.a.createElement(ft.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:n,onClose:a},o.a.createElement("div",{className:i.paper},o.a.createElement(h.a,{className:i.title,variant:"title",id:"modal-title"},t.formatMessage(v.confirmRemoval)),o.a.createElement(h.a,{className:i.text,variant:"subheading"},t.formatMessage(v.confirmLayoutChange)),o.a.createElement(h.a,{className:i.text,variant:"subheading"},t.formatMessage(v.confirmLayoutDeletion)),o.a.createElement("div",{className:i.buttonWrapper},o.a.createElement(g.a,{className:i.cancel,onClick:a},t.formatMessage(v.cancel)),o.a.createElement(g.a,{className:i.delete,onClick:r},t.formatMessage(v.delete))))))}),ht=Object(w.b)(m.c,Object(r.b)("mosaic"),r.c,Object(w.i)(function(e){var t=e.mosaic;return{isConfirm:t.isConfirmRemoveMosaic,close:t.closeConfirmRemoveMosaic,confirm:t.confirmRemoveMosaic}}))(pt),vt=function(e){return{title:{margin:"1.2vw",textAlign:"center",fontSize:"1vw"},text:{fontSize:"1vw"},paper:{top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"absolute",width:"30vw",backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:"2vw"},button:{color:"#1565C0",marginTop:"0.5vw",alignSelf:"center",fontSize:"1vw",padding:"0.5vw"},buttonWrapper:{marginTop:"1vw",display:"flex",flexDirection:"row",justifyContent:"space-between"}}},yt=Object(x.withStyles)(vt)(function(e){var t=e.intl,i=e.classes,n=e.isConfirm,a=e.close,r=e.confirm;return o.a.createElement("div",null,o.a.createElement(ft.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:n,onClose:a},o.a.createElement("div",{className:i.paper},o.a.createElement(h.a,{className:i.title,variant:"title",id:"modal-title"},t.formatMessage(v.actionConfirm)),o.a.createElement(h.a,{className:i.text,variant:"subheading"},t.formatMessage(v.unsavedLayoutChanges)),o.a.createElement(h.a,{className:i.text,variant:"subheading"},t.formatMessage(v.continueText)),o.a.createElement("div",{className:i.buttonWrapper},o.a.createElement(g.a,{className:i.button,onClick:a},t.formatMessage(v.cancel)),o.a.createElement(g.a,{className:i.button,onClick:r},t.formatMessage(v.continueButton))))))}),bt=Object(w.b)(m.c,Object(r.b)("mosaic","editableMosaic"),r.c,Object(w.i)(function(e){var t=e.editableMosaic,i=t.isConfirmRemovePositions,n=t.closeConfirmRemovePositions,o=t.confirmRemovePositions,a=t.isConfirmRemoveLayer,r=t.closeConfirmRemoveLayer,s=t.confirmRemoveLayer,l=e.mosaic,c=l.isConfirmSelectMosaic,u=l.closeConfirmSelectMosaic,d=l.confirmSelectMosaic;return i?{isConfirm:i,close:n,confirm:o}:a?{isConfirm:a,close:r,confirm:s}:c?{isConfirm:c,close:u,confirm:d}:{isConfirm:!1}}))(yt),wt=i(143),xt=i.n(wt),Lt={success:{minWidth:0,backgroundColor:"#43a047",fontSize:"1vw"},error:{minWidth:0,backgroundColor:"#ef5350",fontSize:"1vw"}},Mt={vertical:"bottom",horizontal:"center"},Pt=Object(x.withStyles)(Lt)(function(e){var t=e.intl,i=e.classes,n=e.isActionMessage,a=e.closeActionMessage,r=e.actionMessageState,s=e.actionMessageText;return o.a.createElement(xt.a,{className:i.root,anchorOrigin:Mt,open:n,onClose:a,ContentProps:{className:r?i.success:i.error},message:s&&t.formatMessage(v[s])})}),St=Object(w.b)(m.c,Object(r.b)("actionMessage"),r.c,Object(w.i)(function(e){var t=e.actionMessage;return{isActionMessage:t.isActionMessage,closeActionMessage:t.closeActionMessage,actionMessageState:t.actionMessageState,actionMessageText:t.actionMessageText}}))(Pt),Ct=(i(330),{wrapper:{margin:"0 auto",width:"80vw",padding:"10px",display:"flex",flexDirection:"row"},block:{padding:"10px"}}),Ot=function(){return o.a.createElement("div",{style:Ct.wrapper},o.a.createElement(Be,null),o.a.createElement(ve,null),o.a.createElement(dt,null),o.a.createElement(st,null),o.a.createElement(ht,null),o.a.createElement(bt,null),o.a.createElement(St,null))},jt=i(144),Et=i.n(jt),Ht=i(145),Tt=i.n(Ht),Nt={en:{layoutSettings:"Layout settings",layoutTemplates:"Layouts Templates:",createdTemplates:"Created Layouts:",controls:"Controls",grid:"Grid",changeGridDimension:"Change grid dimension",hideGrid:"Hide grid",showGrid:"Show grid",removeAllPositions:"Remove all positions",removeLayer:"Remove layer",addLayer:"Add layer",saveAsNew:"Save as new",hideLowLayers:"hide low layers",showLowLayers:"show low layers",layer:"Layer {index}",layerNum:"Layer number",changeLayerNum:"Change Layer number",changeLayout:"Change Layout",confirmRemoval:"Confirm removal",confirmLayoutDeletion:"Do you confirm layout deletion?",cancel:"Cancel",delete:"Delete",confirmLayoutChange:"If the layout was used in one of the conferences, it will be changed to automatic.",actionConfirm:"Action confirm",unsavedLayoutChanges:"All unsaved layout changes will be lost.",continueText:"Continue?",continueButton:"Continue",layoutsSearch:"Layouts search",role:"Role",filterPositionRole:"Filter by position role",dimension:"Dimension",filterLayoutDimension:"Filter by layout dimension",numberParticipants:"Participants number",filterPumberParticipants:"Filter by participants number",clearFilter:"Clear Filter",autoSelect:"Auto-select",lecturer:"Lecturer",previousLecturer:"Previous lecturer",blankScreen:"Blank screen",scrolling:"Scrolling",notSet:"Not Set",paginationText:"{firstOnPage} - {lastOnPage} of {count}",positionEditing:"Editing position {selectedPosition}",position:"Position",changingPositionNumber:"Changing the position number",changingPositionRole:"Changing the position role",deletePosition:"Delete position",layoutSuccessfullyAdded:"Layout successfully added!",errorAddingLayout:"Error adding layout.",layoutSuccessfullyDeleted:"Layout successfully deleted!",errorDeletingLayout:"Error deleting layout.",errorLoadingCreatedLayouts:"Error loading created layouts."},ru:{layoutSettings:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0440\u0430\u0441\u043a\u043b\u0430\u0434\u043a\u0438",layoutTemplates:"\u0428\u0430\u0431\u043b\u043e\u043d\u044b \u0440\u0430\u0441\u043a\u043b\u0430\u0434\u043e\u043a:",createdTemplates:"\u0421\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0435 \u0440\u0430\u0441\u043a\u043b\u0430\u0434\u043a\u0438:",controls:"\u042d\u043b\u0435\u043c\u0435\u043d\u0442\u044b \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f",grid:"\u0421\u0435\u0442\u043a\u0430",changeGridDimension:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0437\u043c\u0435\u0440\u043d\u043e\u0441\u0442\u0438 \u0441\u0435\u0442\u043a\u0438",hideGrid:"\u0421\u043a\u0440\u044b\u0442\u044c \u0441\u0435\u0442\u043a\u0443",showGrid:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0441\u0435\u0442\u043a\u0443",removeAllPositions:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0441\u0435 \u043f\u043e\u0437\u0438\u0446\u0438\u0438",removeLayer:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043b\u043e\u0439",addLayer:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u043b\u043e\u0439",layer:"\u0421\u043b\u043e\u0439 {index}",layerNum:"\u041d\u043e\u043c\u0435\u0440 \u0441\u043b\u043e\u044f",changeLayerNum:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043d\u043e\u043c\u0435\u0440\u0430 \u0441\u043b\u043e\u044f",saveAsNew:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043a\u0430\u043a \u043d\u043e\u0432\u0443\u044e",hideLowLayers:"\u0421\u043a\u0440\u044b\u0442\u044c \u043d\u0438\u0436\u043d\u0438\u0435 \u0441\u043b\u043e\u0438",showLowLayers:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043d\u0438\u0436\u043d\u0438\u0435 \u0441\u043b\u043e\u0438",changeLayout:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0440\u0430\u0441\u043a\u043b\u0430\u0434\u043a\u0443",confirmRemoval:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f",confirmLayoutDeletion:"\u0412\u044b \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0430\u0435\u0442\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0440\u0430\u0441\u043a\u043b\u0430\u0434\u043a\u0438?",cancel:"\u041e\u0442\u043c\u0435\u043d\u0430",delete:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",confirmLayoutChange:"\u0415\u0441\u043b\u0438 \u0440\u0430\u0441\u043a\u043b\u0430\u0434\u043a\u0430 \u0431\u044b\u043b\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0430 \u0432 \u043a\u0430\u043a\u043e\u0439-\u0442\u043e \u0438\u0437 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0439, \u043e\u043d\u0430 \u0431\u0443\u0434\u0435\u0442 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0430 \u043d\u0430 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0443\u044e.",actionConfirm:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f",unsavedLayoutChanges:"\u0412\u0441\u0435 \u043d\u0435\u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0440\u0430\u0441\u043a\u043b\u0430\u0434\u043a\u0438 \u0431\u0443\u0434\u0443\u0442 \u043f\u043e\u0442\u0435\u0440\u044f\u043d\u044b.",continueText:"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c?",continueButton:"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c",layoutsSearch:"\u041f\u043e\u0438\u0441\u043a \u0440\u0430\u0441\u043a\u043b\u0430\u0434\u043e\u043a",role:"\u0420\u043e\u043b\u044c",filterPositionRole:"\u0424\u0438\u043b\u044c\u0442\u0440 \u043f\u043e \u0440\u043e\u043b\u0438 \u043f\u043e\u0437\u0438\u0446\u0438\u0438",dimension:"\u0420\u0430\u0437\u043c\u0435\u0440\u043d\u043e\u0441\u0442\u044c",filterLayoutDimension:"\u0424\u0438\u043b\u044c\u0442\u0440 \u043f\u043e \u0440\u0430\u0437\u043c\u0435\u0440\u043d\u043e\u0441\u0442\u0438 \u0440\u0430\u0441\u043a\u043b\u0430\u0434\u043a\u0438",numberParticipants:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432",filterPumberParticipants:"\u0424\u0438\u043b\u044c\u0442\u0440 \u043f\u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0443 \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432",clearFilter:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440",autoSelect:"\u0410\u0432\u0442\u043e\u0432\u044b\u0431\u043e\u0440",lecturer:"\u041b\u0435\u043a\u0442\u043e\u0440",previousLecturer:"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0439 \u043b\u0435\u043a\u0442\u043e\u0440",blankScreen:"\u041f\u0443\u0441\u0442\u043e\u0439 \u044d\u043a\u0440\u0430\u043d",scrolling:"\u041f\u0440\u043e\u043a\u0440\u0443\u0442\u043a\u0430",notSet:"\u041d\u0435 \u0437\u0430\u0434\u0430\u043d\u043e",paginationText:"{firstOnPage} - {lastOnPage} \u0438\u0437 {count}",positionEditing:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0437\u0438\u0446\u0438\u0438 {selectedPosition}",position:"\u041f\u043e\u0437\u0438\u044f",changingPositionNumber:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043d\u043e\u043c\u0435\u0440\u0430 \u043f\u043e\u0437\u0438\u0446\u0438\u0438",changingPositionRole:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0440\u043e\u043b\u0438 \u043f\u043e\u0437\u0438\u0446\u0438\u0438",deletePosition:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u0437\u0438\u0446\u0438\u044e",layoutSuccessfullyAdded:"\u0420\u0430\u0441\u043a\u043b\u0430\u0434\u043a\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430!",errorAddingLayout:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0440\u0430\u0441\u043a\u043b\u0430\u0434\u043a\u0438.",layoutSuccessfullyDeleted:"\u0420\u0430\u0441\u043a\u043b\u0430\u0434\u043a\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u0430!",errorDeletingLayout:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0440\u0430\u0441\u043a\u043b\u0430\u0434\u043a\u0438.",errorLoadingCreatedLayouts:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0445 \u0440\u0430\u0441\u043a\u043b\u0430\u0434\u043e\u043a."}},Dt=function(e){var t="; ".concat(document.cookie).split("; ".concat(e,"="));if(2===t.length)return t.pop().split(";").shift()};var Rt=function(e,t){var i=Dt("lang"),n=e[i];return n||(n=e[i=(i=navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage||t).substring(0,2)]),n||(n=e[i=t]),{locale:i,messagesLocale:n}},kt=Object(w.b)(Object(w.k)("locale","localeChange","ru"),Object(w.k)("messagesLocale","messagesLocaleChange",Nt.ru),Object(w.c)({componentDidMount:function(){var e=this.props,t=e.localeChange,i=e.messagesLocaleChange,n=Rt(Nt,"ru"),o=n.locale,a=n.messagesLocale;t(o),i(a)}}));Object(m.b)(Object(T.a)(Et.a).concat(Object(T.a)(Tt.a)));var Wt=kt(function(e){var t=e.children,i=e.messagesLocale,n=e.locale;return o.a.createElement(m.a,{locale:n,messages:i},t)}),zt=i(39),At=i.n(zt),Vt=i(74),Bt=i.n(Vt),It=function(e,t){return Bt.a.post(e,t)};function Gt(e){var t=e.length,i=[],n=[],o=[];e.forEach(function(e,t){var a=e.positions,r=e.dimension,s=t;i.push(r),a.forEach(function(e){var t=e.i,i=e.x,a=e.y,r=e.w,l=e.role;n.push("".concat(s,",").concat(i,",").concat(a,",").concat(r)),function(e){return 1===e||2===e||3===e||4===e}(l)&&o.push("".concat(s,",").concat(Number(t)-1,",").concat(l,",0,0"))})});var a=i.join("\n"),r=n.join("\n");return{cfg:"#".concat(t,"\n").concat(a,"\n").concat(r),set:o.join("\n")}}var Ft=function(e){var t=function(e){return 1-.1*e}(e);return["rgba(224, 224, 224, ".concat(t,")"),"rgba(128, 203, 196, ".concat(t,")"),"rgba(255, 183, 77, ".concat(t,")"),"rgba(189, 189, 189, ".concat(t,")"),"rgba(179, 229, 252, ".concat(t,")")]};function Xt(e){var t=document.createElement("div");t.id="canvasWrapper",document.body.appendChild(t),document.getElementById("canvasWrapper").innerHTML='<canvas id="myCanvas" width="640" height="360"></canvas>';var i=document.getElementById("myCanvas").getContext("2d");e.forEach(function(e,t){var n=e.positions,o=e.dimension;n.forEach(function(e){!function(e,t,i,n,o,a,r,s,l){var c=640/r,u=360/r,d=t*c+2.5,m=i*u+2.5,f=o*u-5,g=n*c-5,p=f/2;s.lineJoin="round",s.lineWidth=5,s.strokeStyle="#424242",s.strokeRect(d+2.5,m+2.5,g-5,f-5),s.fillStyle=Ft(l)[a],s.fillRect(d+2.5,m+2.5,g-5,f-5),s.fillStyle="#424242",s.font="lighter ".concat(p,"px Arial"),s.textAlign="center",s.textBaseline="middle",s.fillText(e,d+2.5+(g-5)/2,m+2.5+(f-5)/2)}(e.i,e.x,e.y,e.w,e.h,e.role,o,i,t)})});var n=document.getElementById("myCanvas").toDataURL("image/png");return document.getElementById("canvasWrapper").innerHTML="",document.body.removeChild(t),n}function Yt(e,t,i){e.forEach(function(e,n){n<t&&(e.visible=i)})}function Jt(e,t){return e.map(function(e){var i=e.positions,n=Object(d.a)(e,["positions"]);return Object(u.a)({},n,{positions:i.map(function(e){var i=e.i,n=Object(d.a)(e,["i"]);return Object(u.a)({},n,{i:t(i)})}).sort(function(e,t){return e.i-t.i})})})}function Ut(e){return e.map(function(e){return e.positions.map(function(e){var t=e.i;return Number(t)})}).reduce(function(e,t){return e.concat(t)},[])}var $t=function(e){return{removeLayer:function(t){e.layers.length>1&&(Object(s.b)(t),e.selectedLayer>0&&(e.selectedLayer-=1))},addLayer:function(){e.layers.push({dimension:3,positions:[]}),e.selectedLayer=e.layers.length-1},remove:function(){Object(s.d)(e,2).removeMosaic(e)},selectLayer:function(t){e.selectedLayer=t},getNewtPositionNum:function(){var t=Ut(e.layers),i=Math.max.apply(Math,Object(T.a)(t))+1;return t.length?i.toString():"1"},remappingPositionsNum:function(){var t=Ut(e.layers).sort(function(e,t){return e-t}),i={};t.forEach(function(e,t){i[e]="".concat(t+1)}),e.layers=Jt(e.layers,function(e){return i[e]})},changePositionNum:function(t){var i=t.position,n=t.num;e.layers=Jt(e.layers,function(e){return function(e,t,i){return i===e?t:i===t?e:i}(i,n,e)})},changePositionRole:function(t,i){e.layers.forEach(function(n,o){n.positions,n.dimension,e.layers[o].positions=function(e,t,i,n){return e[t].positions.map(function(e){var t=e.role,o=e.i,a=Object(d.a)(e,["role","i"]);return Object(u.a)({},a,{i:o,role:function(e,t,i,n){return e===t?n:1===n&&1===i||2===n&&2===i?0:i}(o,i,t,n)})})}(e.layers,o,t,i)})},changeLayerDimension:function(t){var i=e.layers[e.selectedLayer].dimension,n=e.layers[e.selectedLayer].positions,o=t/i;e.layers[e.selectedLayer]={dimension:t,positions:n.map(function(e){var t=e.i,i=e.x,n=e.y,a=e.h,r=e.w,s=e.role;return{i:t,x:i*o,y:n*o,h:a*o,w:r*o,role:s}})}},openConfirmRemoveMosaic:function(){Object(s.d)(e,2).openConfirmRemoveMosaic(e)},hideLowLayers:function(){Yt(e.layers,e.selectedLayer,!1),e.lowLayersVisibility=!1},showLowLayers:function(){Yt(e.layers,e.selectedLayer,!0),e.lowLayersVisibility=!0},changeLayerNum:function(t){var i=Object(s.a)(e.layers[e.selectedLayer]),n=Object(s.a)(e.layers[t]);e.layers.set(t,i),e.layers.set(e.selectedLayer,n),e.selectedLayer=t}}},qt={w:1,h:1,role:0};function Kt(e,t){var i=e.find(function(e,i){var n=e.i;return t===n});return{item:i,index:e.indexOf(i)}}var Qt=function(e){return{addPosition:function(t,i){e.positions.push(Object(u.a)({},qt,{x:t,y:i,i:Object(s.d)(e,2).getNewtPositionNum()}))},removePosition:function(t){Object(s.b)(t),Object(s.d)(e,2).remappingPositionsNum()},remove:function(){Object(s.d)(e,2).removeLayer(e)},changeDimension:function(t){Object(s.d)(e,2).changeLayerDimension(t)},changeCoordinates:function(t,i,n){var o=Kt(e.positions,t),a=o.item,r=o.index,s=a.w,l=a.h,c=a.role;e.positions.set(r,{i:t,w:s,h:l,role:c,x:i,y:n})},changeWidth:function(t,i,n){var o=Kt(e.positions,t),a=o.item,r=o.index,s=a.x,l=a.y,c=a.role;e.positions.set(r,{i:t,w:i,h:n,role:c,x:s,y:l})},changeMaxWidth:function(t){var i=t.i,n=t.maxW,o=t.maxH,a=Kt(e.positions,i),r=a.item,s=a.index,l=r.x,c=r.y,u=r.w,d=r.h,m=r.role;e.positions.set(s,{i:i,w:u,h:d,role:m,x:l,y:c,maxW:n,maxH:o})},visibleOff:function(){e.visible=!1},visibleOn:function(){e.visible=!0}}},Zt={i:s.g.string,x:s.g.number,y:s.g.number,w:s.g.number,h:s.g.number,role:s.g.optional(s.g.number,0),maxW:s.g.maybe(s.g.number,null),maxH:s.g.maybe(s.g.number,null)},_t=function(e){return{changeRole:function(t){Object(s.d)(e,4).changePositionRole(e.i,t)},remove:function(){Object(s.d)(e,2).removePosition(e)},selectPosition:function(){Object(s.d)(e,5).selectPosition(e.i)},changePositionNum:function(t,i){Object(s.d)(e,4).changePositionNum({position:t,num:i})}}},ei=s.g.model(Zt).actions(_t),ti={visible:s.g.optional(s.g.boolean,!0),dimension:s.g.number,positions:s.g.array(ei)},ii=function(e){return{get getPositionsLength(){return e.positions.length}}},ni=s.g.model(ti).actions(Qt).views(ii),oi={id:s.g.identifier,selectedLayer:s.g.optional(s.g.number,0),lowLayersVisibility:s.g.optional(s.g.boolean,!0),layers:s.g.array(ni)},ai=function(e){return{get getLayersPositions(){return!!e.layers.reduce(function(e,t){return e+t.positions.length},0)}}},ri=s.g.model(oi).actions($t).views(ai),si=function(e){function t(t,i){e.isDefaultSelected=i,e.selectedMosaic=Number(t);var n=(i?e.defaultPresets:e.customPresets).find(function(t){var i=t.id;return Number(i)===e.selectedMosaic});n.selectedLayer=n.layers.length-1}return{saveAsNew:Object(s.c)(At.a.mark(function t(i){var n,o,a,r,l,c;return At.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(s.e)(i),o=n.map(function(e){return{positions:e.positions,dimension:e.dimension}}),a=Gt(o),r=a.cfg,l=a.set,t.prev=3,t.next=6,It("/constructor/add",{cfg:r,set:l,mosaic:JSON.stringify({layers:o})}).then(function(e){return e.data.data.mosaic.id});case 6:return c=t.sent,t.next=9,(u="/constructor/img/".concat(c),d=Xt(o),Bt.a.post(u,d,{headers:{"Content-Type":"image/png"}})).then(function(e){return c});case 9:e.customPresets.push(ri.create({id:c.toString(),layers:o})),e.isSaved=!0,t.next=17;break;case 13:t.prev=13,t.t0=t.catch(3),e.isSaveError=!0,console.error("Failed to save preset",t.t0);case 17:case"end":return t.stop()}var u,d},t,this,[[3,13]])})),confirmRemoveMosaic:Object(s.c)(At.a.mark(function t(){var i,n;return At.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.customPresets.find(function(t){return t.id===e.idToRemoveMosaic}),n=i.id,t.prev=2,t.next=5,It("/constructor/delete/".concat(n)).then(function(e){return e});case 5:e.isConfirmRemoveMosaic=!1,Object(s.b)(i),Number(n)===e.selectedMosaic&&(e.selectedMosaic=0),e.isDelete=!0,t.next=15;break;case 11:t.prev=11,t.t0=t.catch(2),e.isDeleteError=!0,console.error("Failed load presets",t.t0);case 15:case"end":return t.stop()}},t,this,[[2,11]])})),loadCustomPresets:Object(s.c)(At.a.mark(function t(){return At.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(i="/constructor/list",Bt.a.get(i,{timeout:2e3})).then(function(e){return e.data.data.mosaics.map(function(e){var t=e.mosaic,i=e.id,n=JSON.parse(t);if(n.mozaic){var o=n.mozaic,a=n.collCount;return{id:i.toString(),layers:[{dimension:a,positions:o}]}}var r=n.layers;return{id:i.toString(),layers:r}})});case 3:e.customPresets=t.sent,e.isLoaded=!0,t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),e.isLoadError=!0,console.error("Failed load presets",t.t0);case 11:case"end":return t.stop()}var i},t,this,[[0,7]])})),selectMosaic:t,openConfirmSelectMosaic:function(t,i){e.idToselectMosaic=t,e.isDefaultToselectMosaic=i,e.isConfirmSelectMosaic=!0},closeConfirmSelectMosaic:function(){e.isConfirmSelectMosaic=!1},confirmSelectMosaic:function(){e.isConfirmSelectMosaic=!1,t(e.idToselectMosaic,e.isDefaultToselectMosaic)},openConfirmRemoveMosaic:function(t){e.idToRemoveMosaic=t.id,e.isConfirmRemoveMosaic=!0},closeConfirmRemoveMosaic:function(){e.isConfirmRemoveMosaic=!1},isLoadedOff:function(){e.isLoaded=!1},isLoadErrorOff:function(){e.isLoadError=!1},isSavedOff:function(){e.isSaved=!1},isSaveErrorOff:function(){e.isSaveError=!1},isDeleteOff:function(){e.isDelete=!1},isDeleteErrorOff:function(){e.isDeleteError=!1}}},li={idToselectMosaic:s.g.maybe(s.g.string),isDefaultToselectMosaic:s.g.maybe(s.g.boolean),isConfirmSelectMosaic:s.g.optional(s.g.boolean,!1),isConfirmRemoveMosaic:s.g.optional(s.g.boolean,!1),isLoaded:s.g.optional(s.g.boolean,!1),isLoadError:s.g.optional(s.g.boolean,!1),isSaved:s.g.optional(s.g.boolean,!1),isSaveError:s.g.optional(s.g.boolean,!1),isDelete:s.g.optional(s.g.boolean,!1),isDeleteError:s.g.optional(s.g.boolean,!1),idToRemoveMosaic:s.g.maybe(s.g.string),isDefaultSelected:s.g.optional(s.g.boolean,!0),selectedMosaic:s.g.number,defaultPresets:s.g.array(ri),customPresets:s.g.array(ri)},ci=function(e){return{get getCustomPresetsLength(){return Object(Y.A)(e.customPresets).length},get getDefaultPresetsLength(){return Object(Y.A)(e.defaultPresets).length},getPresetById:function(t){return(e.isDefaultSelected?e.defaultPresets:e.customPresets).find(function(e){return e.id===t})}}},ui={selectedMosaic:0,defaultPresets:[{id:"1",layers:[{dimension:1,positions:[{i:"1",x:0,y:0,w:1,h:1,role:0}]}]},{id:"2",layers:[{dimension:4,positions:[{i:"1",x:0,y:1,w:2,h:2,role:0},{i:"2",x:2,y:1,w:2,h:2,role:0}]}]},{id:"3",layers:[{dimension:4,positions:[{i:"1",x:0,y:0,w:2,h:2,role:0},{i:"2",x:2,y:0,w:2,h:2,role:0},{i:"3",x:1,y:2,w:2,h:2,role:0}]}]},{id:"4",layers:[{dimension:2,positions:[{i:"1",x:0,y:0,w:1,h:1,role:0},{i:"2",x:1,y:0,w:1,h:1,role:0},{i:"3",x:0,y:1,w:1,h:1,role:0},{i:"4",x:1,y:1,w:1,h:1,role:0}]}]},{id:"5",layers:[{dimension:3,positions:[{i:"9",x:0,y:0,w:1,h:1,role:0},{i:"7",x:1,y:0,w:1,h:1,role:0},{i:"8",x:2,y:0,w:1,h:1,role:0},{i:"5",x:0,y:1,w:1,h:1,role:0},{i:"6",x:1,y:1,w:1,h:1,role:0},{i:"3",x:2,y:1,w:1,h:1,role:0},{i:"4",x:0,y:2,w:1,h:1,role:0},{i:"1",x:1,y:2,w:1,h:1,role:0},{i:"2",x:2,y:2,w:1,h:1,role:0}]}]},{id:"6",layers:[{dimension:4,positions:[{i:"1",x:0,y:0,w:1,h:1,role:0},{i:"2",x:1,y:0,w:1,h:1,role:0},{i:"3",x:2,y:0,w:1,h:1,role:0},{i:"4",x:3,y:0,w:1,h:1,role:0},{i:"5",x:0,y:1,w:1,h:1,role:0},{i:"6",x:1,y:1,w:1,h:1,role:0},{i:"7",x:2,y:1,w:1,h:1,role:0},{i:"8",x:3,y:1,w:1,h:1,role:0},{i:"9",x:0,y:2,w:1,h:1,role:0},{i:"10",x:1,y:2,w:1,h:1,role:0},{i:"11",x:2,y:2,w:1,h:1,role:0},{i:"12",x:3,y:2,w:1,h:1,role:0},{i:"13",x:0,y:3,w:1,h:1,role:0},{i:"14",x:1,y:3,w:1,h:1,role:0},{i:"15",x:2,y:3,w:1,h:1,role:0},{i:"16",x:3,y:3,w:1,h:1,role:0}]}]},{id:"7",layers:[{dimension:4,positions:[{i:"1",x:0,y:0,w:3,h:3,role:0},{i:"2",x:0,y:3,w:1,h:1,role:0},{i:"3",x:1,y:3,w:1,h:1,role:0},{i:"4",x:2,y:3,w:1,h:1,role:0},{i:"5",x:3,y:3,w:1,h:1,role:0},{i:"6",x:3,y:2,w:1,h:1,role:0},{i:"7",x:3,y:1,w:1,h:1,role:0},{i:"8",x:3,y:0,w:1,h:1,role:0}]}]},{id:"8",layers:[{dimension:4,positions:[{i:"1",x:0,y:0,w:2,h:2,role:0},{i:"2",x:2,y:0,w:2,h:2,role:0},{i:"3",x:0,y:2,w:1,h:1,role:0},{i:"4",x:1,y:2,w:1,h:1,role:0},{i:"5",x:2,y:2,w:1,h:1,role:0},{i:"6",x:3,y:2,w:1,h:1,role:0},{i:"7",x:0,y:3,w:1,h:1,role:0},{i:"8",x:1,y:3,w:1,h:1,role:0},{i:"9",x:2,y:3,w:1,h:1,role:0},{i:"10",x:3,y:3,w:1,h:1,role:0}]}]}],customPresets:[]},di=s.g.model(li).actions(si).views(ci).create(ui);di.loadCustomPresets();var mi=di,fi=function(e){function t(){e.mosaic.layers[e.mosaic.selectedLayer].positions=[],e.mosaic.remappingPositionsNum()}function i(t){e.mosaic.layers.length>1&&(Object(s.b)(e.mosaic.layers[t]),e.mosaic.selectedLayer>0&&(e.mosaic.selectedLayer-=1),e.mosaic.remappingPositionsNum())}return{setMosaic:function(t){e.mosaic=ri.create(t)},selectPosition:function(t){e.selectedPosition=t},removeLayerPositions:t,removeLayer:i,openConfirmRemoveLayer:function(t){e.indexLayerToRemove=t,e.isConfirmRemoveLayer=!0},closeConfirmRemoveLayer:function(){e.isConfirmRemoveLayer=!1},confirmRemoveLayer:function(){e.isConfirmRemoveLayer=!1,i(e.indexLayerToRemove)},openConfirmRemovePositions:function(){e.isConfirmRemovePositions=!0},closeConfirmRemovePositions:function(){e.isConfirmRemovePositions=!1},confirmRemovePositions:function(){e.isConfirmRemovePositions=!1,t()}}},gi={indexLayerToRemove:s.g.maybe(s.g.number),isConfirmRemoveLayer:s.g.optional(s.g.boolean,!1),isConfirmRemovePositions:s.g.optional(s.g.boolean,!1),dimensions:s.g.array(s.g.number),selectedPosition:s.g.string,mosaic:ri},pi=function(e,t,i){if(t.length){var n=[];t.forEach(function(t){var o={w:t.w,xLeft:t.x,xRght:i-(t.x+t.w),h:t.h,yTop:t.y,yBttm:i-(t.y+t.h)};Object.values(o).forEach(function(t){return n.push(function(e,t,i){var n=e.map(function(e){return{grid:e,blockSize:e/(t/i)}}).filter(function(e){return e.grid,e.blockSize%1===0}).map(function(e){var t=e.grid;return e.blockSize,t});return n.length>0?n:[]}(e,i,t))})});var o=n.filter(function(e){return e.length>0});return e.filter(function(e){return o.reduce(function(t,i){return t&&i.includes(e)},o[0].includes(e))})}return e},hi=function(e){return{get getLayersPositions(){return e.mosaic.layers.map(function(e){return e.positions.map(function(e){return e.i})}).reduce(function(e,t){return e.concat(t)},[]).sort(function(e,t){return e-t})},get getPosition(){return e.mosaic.layers.get(e.mosaic.selectedLayer).positions.find(function(t){return t.i===e.selectedPosition})||{}},get getSupportedDimensions(){var t=e.dimensions,i=e.mosaic.layers.get(e.mosaic.selectedLayer),n=i.positions,o=i.dimension;return pi(t,n,o)},get layersMoreThanOne(){return e.mosaic.layers.length>1},get layersLessThanThree(){return e.mosaic.layers.length<3},get getLowestVisible(){var t=e.mosaic.layers.find(function(e,t){return e.visible});if(t){var i=e.mosaic.layers.indexOf(t);if(i<e.mosaic.selectedLayer)return i}return e.mosaic.selectedLayer}}},vi={isConfirmRemoveLayer:!1,isConfirmRemovePositions:!1,dimensions:[1,2,3,4,5,6,8,9,10,12],selectedPosition:"",mosaic:{id:"1000",layers:[{dimension:3,positions:[]}]}},yi=s.g.model(gi).actions(fi).views(hi).create(vi),bi={presetsOnPage:s.g.number,defaultVisible:s.g.boolean,customVisible:s.g.boolean},wi=function(e,t){return e&&t?8:16},xi=function(e,t){return!1===e&&!1===t},Li=function(e){return{changeDefaultVisible:function(){e.defaultVisible=!e.defaultVisible,xi(e.defaultVisible,e.customVisible)&&(e.customVisible=!0),e.presetsOnPage=wi(e.defaultVisible,e.customVisible)},changeCustomVisible:function(){e.customVisible=!e.customVisible,xi(e.defaultVisible,e.customVisible)&&(e.defaultVisible=!0),e.presetsOnPage=wi(e.defaultVisible,e.customVisible)}}},Mi={presetsOnPage:8,defaultVisible:!0,customVisible:!0},Pi=s.g.model(bi).actions(Li).create(Mi),Si={page:s.g.number},Ci=function(e){return{pagePrev:function(){e.page--},pageNext:function(){e.page++},setPage:function(t){e.page=t}}},Oi=s.g.model(Si).actions(Ci),ji={page:0},Ei=Oi.create(ji),Hi=Oi.create(ji),Ti={holdTimer:s.g.optional(s.g.number,0),visible:s.g.boolean,target:s.g.frozen()},Ni=function(e){return{positionModalShow:function(t){e.holdTimer<5?(e.target=t,e.visible=!0):e.holdTimer=0},positionModalHide:function(){e.visible=!1},holdTimerCount:function(){e.holdTimer++}}},Di={visible:!1,target:{}},Ri=s.g.model(Ti).actions(Ni).create(Di),ki=function(e){return{closeActionMessage:function(){e.isActionMessage=!1},setActionMessage:function(t,i,n){e.isActionMessage=t,e.actionMessageState=i,e.actionMessageText=n}}},Wi={isActionMessage:s.g.boolean,actionMessageState:s.g.maybe(s.g.boolean),actionMessageText:s.g.maybe(s.g.string)},zi={isActionMessage:!1},Ai=s.g.model(Wi).actions(ki).create(zi),Vi=function(e){var t=e.mosaic,i=e.editableMosaic,n=e.actionMessage,o=e.presets,a=e.customPresetsPage;Object(Y.v)(function(){return t.isLoadError},function(e){e&&n.setActionMessage(!0,!1,"errorLoadingCreatedLayouts")}),Object(Y.v)(function(){return t.selectedMosaic},function(e){e&&i.setMosaic(Object(s.a)(t.getPresetById(e.toString())))}),Object(Y.v)(function(){return t.isSaved},function(e){e&&n.setActionMessage(!0,!0,"layoutSuccessfullyAdded")}),Object(Y.v)(function(){return t.isSaveError},function(e){e&&n.setActionMessage(!0,!1,"errorAddingLayout")}),Object(Y.v)(function(){return t.isDelete},function(e){e&&n.setActionMessage(!0,!0,"layoutSuccessfullyDeleted")}),Object(Y.v)(function(){return t.isDeleteError},function(e){e&&n.setActionMessage(!0,!1,"errorDeletingLayout")}),Object(Y.v)(function(){return t.getCustomPresetsLength},function(e){var t=o.presetsOnPage,i=a.page;i>0&&i===e/t&&e%t===0&&a.pagePrev()})},Bi=function(e){var t=e.mosaic,i=e.actionMessage;Object(Y.v)(function(){return i.isActionMessage},function(e){e||(t.isLoadedOff(),t.isLoadErrorOff(),t.isSavedOff(),t.isSaveErrorOff())})},Ii=function(e){var t=e.mosaic,i=e.presets,n=e.defaultPresetsPage,o=e.customPresetsPage;Object(Y.v)(function(){return i.customVisible},function(e){var o=i.presetsOnPage,a=n.page,r=t.getDefaultPresetsLength,s=Math.floor(r/o);e||a>0&&(o>=r%o&&n.setPage(s),r%o===0&&n.pagePrev())}),Object(Y.v)(function(){return i.defaultVisible},function(e){var n=i.presetsOnPage,a=o.page,r=t.getCustomPresetsLength,s=Math.floor(r/n);e||a>0&&(n>=r%n&&o.setPage(s),r%n===0&&o.pagePrev())})},Gi={mosaic:mi,presets:Pi,editableMosaic:yi,positionModal:Ri,defaultPresetsPage:Ei,customPresetsPage:Hi,actionMessage:Ai};(function(e){Vi(e),Bi(e),Ii(e)})(Gi);var Fi=Gi;Object(s.f)("ignore"),Object(a.render)(o.a.createElement(Wt,null,o.a.createElement(r.a,Fi,o.a.createElement(Ot,null))),document.getElementById("root"))}},[[146,2,1]]]);
//# sourceMappingURL=main.2dc6d405.chunk.js.map